<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gõ Cửa Phố Phường</title>
    <link rel="stylesheet" href="./css/infor-city.css">
    <link rel="stylesheet" href="./fonts/fontawesome-free-6.4.0-web/fontawesome-free-6.4.0-web/css/all.css">
    <link rel="stylesheet" type="text/css" href="./css/bootstrap.min.css">
    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="./css/responsive.css">
    <link rel="stylesheet" href="./style.css">

    <script src="https://vjs.zencdn.net/5.10.4/video.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r76/three.js"></script>
    <script src="https://rawgit.com/yanwsh/videojs-panorama/master/dist/videojs-panorama.v5.js"></script>
    <link rel="stylesheet" href=" https://vjs.zencdn.net/5.10.4/video-js.css" />
    <style>
      .player-wrapper {
        position: relative;
        width: 100%;
        height: 100vh;
        z-index: 9999999;
        
        .player {
          position: absolute; 
          top: 0;
          left: 0;
          height: 100%;
          width: 100%;
          z-index: 9999999;
        }
      }
      .video-js .vjs-tech {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      visibility: visible;
  }
       </style>
	   
	   
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.3/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="/resources/demos/style.css">
  <style>
  #draggable { width: 26682px; height: 2341px; padding: 0.5em; }
  #imagescrollid { width: 67px; height: 266px; padding: 0.5em; }
  </style>
  <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
  <script src="https://code.jquery.com/ui/1.13.3/jquery-ui.js"></script>
  <script>

  
var imageclientwidth = 0;
var scrollbarimageWidth = 922;
function setDefaultPositionPano() {
	var image = document.getElementById('imageid');
	imageclientwidth = image.clientWidth;
	$("#draggable").css({left: -500*imageclientwidth/scrollbarimageWidth, position:'absolute'});

	
}
function showhideImage() {
	if (document.getElementById("imageid").style.display != 'block') {
		document.getElementById("imageid").style.display = 'block';
	} else {
		document.getElementById("imageid").style.display = 'none';
	}
	if (document.getElementById("imageid2").style.display != 'block') {
		document.getElementById("imageid2").style.display = 'block';
	} else {
		document.getElementById("imageid2").style.display = 'none';
	}
}


  var x1=x2=y1=y2=0;
  
  var starttime = 0
  var stoptime = 0;

  $( function() {
    $( "#draggable" ).draggable(
	{
    revert: false,
    revertDuration: 100,
    //axis: 'x',
    drag: function (e, ui){
        y2 = ui.position.top;
        x2 = ui.position.left;
        //if(x2>100){alert("greater than 100px");}
                //if(x2<-100){alert("Lesser than -100px");}
				
		//console.log(x2 - x1);
		var distance = x2 - x1;
		distance = distance/(imageclientwidth/scrollbarimageWidth);

		var xscroll = $("#imagescrollid").offset().left;
		var yscroll = $("#imagescrollid").offset().top;
		$("#imagescrollid").css({top: yscroll, left: xscroll - distance, position:'absolute'});
		
		var xscrollbarafterscroll = xscroll - distance;
		if (xscrollbarafterscroll < 399) {
			$("#imagescrollid").css({left: 399, position:'absolute'});
		}
		
		if (xscrollbarafterscroll > 1633) {
			$("#imagescrollid").css({left: 1633, position:'absolute'});
		}

	},
    start: function(e, ui) {
        y1 = ui.position.top;
        x1 = ui.position.left;
		starttime = +new Date();
		//console.log(starttime);
        
    },
    stop: function(e, ui) {
		stoptime = +new Date();
		//console.log(stoptime);
		//console.log(stoptime - starttime);
		if (stoptime - starttime < 100) {
			showhideImage();
		}
		
		y2 = ui.position.top;
		if (y2 > 0) {
			$("#draggable").css({top: 0, position:'absolute'});
		}
		
        x2 = ui.position.left;
		if (x2 > 0) {
			$("#draggable").css({left: 0, position:'absolute'});
		}
        
    }
}
	);
  } );
  </script>
  
  
  
    <script>
  var x1scroll=x2scroll=y1scroll=y2scroll=0;

  $( function() {
    $( "#imagescrollid" ).draggable(
	{
    revert: false,
    revertDuration: 100,
    axis: 'x',
    drag: function (e, ui){
        y2scroll = ui.position.top;
        x2scroll = ui.position.left;
        //if(x2>100){alert("greater than 100px");}
                //if(x2<-100){alert("Lesser than -100px");}
				
		//console.log(x2scroll - x1scroll);
		var distance = x2scroll - x1scroll;
		console.log(distance + ' scale scrollbar vs imagewidth: ' + imageclientwidth/scrollbarimageWidth);

		distance = distance*(imageclientwidth/scrollbarimageWidth);
		
		var xpano = $("#draggable").offset().left;
		var ypano = $("#draggable").offset().top;
		
		$("#draggable").css({top: ypano, left: xpano - distance, position:'absolute'});

               
    },
    start: function(e, ui) {
        y1scroll = ui.position.top;
        x1scroll = ui.position.left;
		starttime = +new Date();
		//console.log(starttime);
        
    },
    stop: function(e, ui) {
        y1scroll = ui.position.top;
        x1scroll = ui.position.left;
		stoptime = +new Date();
		console.log('scrollbar x: '+x1scroll);
		
		if (x1scroll < 500) {
			$("#imagescrollid").css({left: 500, position:'absolute'});
		}
		
		if (x1scroll > 1699) {
			$("#imagescrollid").css({left: 1699, position:'absolute'});
		}
		
		var xpano = $("#draggable").offset().left;
		if (xpano > 0) {
			$("#draggable").css({left: 0, position:'absolute'});
		}
		
		if (xpano < 1820 - imageclientwidth) {
			$("#draggable").css({left: 1820 - imageclientwidth, position:'absolute'});
		}
		//console.log(stoptime);
		//console.log(stoptime - starttime);
    }
}
	);
  } );
  
  
  function moveImageLeft() {
	var xpano = $("#draggable").offset().left;
	var ypano = $("#draggable").offset().top;
	var distance = xpano - 100;
	if (distance < 1820 - imageclientwidth ) {
		distance = 1820 - imageclientwidth;
	}
	$("#draggable").css({top: ypano, left: distance, position:'absolute'});
  }
  
  function moveImageRight() {
	var xpano = $("#draggable").offset().left;
	var ypano = $("#draggable").offset().top;
	var distance = xpano + 100;
	if (distance > 0) {
		distance = 0;
	}
	$("#draggable").css({top: ypano, left: distance, position:'absolute'});
  }
  </script>
  
<script language="javascript">
var zoomPercent = 100;
function zoomInNew(percent) {
	var image = document.getElementById('imageid');
	if (document.getElementById("imageid").style.display != 'block') {
		image = document.getElementById('imageid2');
	}
	 // get the width and height of the image
	 let width = image.clientWidth;
	 let height = image.clientHeight;
  
	 // when the user presses the 'p' key, zoom in
	if (zoomPercent < 100) {
		zoomPercent += percent;
		image.style.width = zoomPercent + "%";
		image.style.height = zoomPercent + "%";
	}
}

function zoomOutNew(percent) {
	var image = document.getElementById('imageid');
	if (document.getElementById("imageid").style.display != 'block') {
		image = document.getElementById('imageid2');
	}
	 // get the width and height of the image
	 let width = image.clientWidth;
	 let height = image.clientHeight;

	if (zoomPercent > 10) {
		zoomPercent -= percent;
		image.style.width = zoomPercent + "%";
		image.style.height = zoomPercent + "%";
	}
}
</script>
</head>
<body class="zoom-in-out" onload="setDefaultPositionPano();">
    <!-- <header>
        <nav>
            <a href="">Home</a>
            <a href="">Contacts</a>
            <a href="">Info</a>
        </nav>
    </header> -->

    <!-- carousel -->
    <div  class="carousel">
        <!-- list item -->
        <div   class="list ">
            <div class="item" id="draggable">
                <a href="./search-infor-city.html"><img style="display:block;" id="imageid" src="./pannellum-master/src/standalone/panoramagocuaphophuong/matchanphohangdong.jpg"></a>
				<a href="./search-infor-city.html"><img style="display:none;" id="imageid2" src="./pannellum-master/src/standalone/panoramagocuaphophuong/matlephohangdong.jpg"></a>
				 <!--<iframe width="100%" height="100%" allowfullscreen style="border-style:none;" src="./pannellum-master/src/standalone/pannellum.htm#panorama=./panoramagocuaphophuong/matchanhangga.jpg&amp;title=Jordan%20Pond&amp;author=Matthew%20Petroff&amp;preview=./panoramagocuaphophuong/Mặt Chẵn Hàng Gà-preview.png"></iframe>
                -->
            </div>
        </div>


        <div class="arrows">
            <a href="#"><button id="prev0" style="background-image: url(./images/51.png); background-repeat: round;" onclick="moveImageLeft();"></button></a>
            <a href="#"><button id="next0" style="background-image: url(./images/52.png); background-repeat: round;" onclick="moveImageRight();"></button></a>
        </div>
        <!-- time running -->
        <div class="time"></div>
    </div>
    
        <div class="row" style="background-color: #ffff;height: 178px;">
            <div class="col-xl-3">
              <ul class="nav pd" style="padding: 20px 26px;">
                <li class="nav-item">
                  <div class="user-items pl-8">
                    <ul class="d-flex justify-content-end list-unstyled">
                      <!-- <li class="nav-item__bt fa-solid fa-volume-high"> -->
                        <a href="#" class="volume-button">
                          <audio id="background-music" loop autoplay>
                            <source src="./music/EmXinh-MONOOnionn-12581640.mp3" type="audio/mp3">
                            Your browser does not support the audio element.
                        </audio>
                        <img src="./images/26.png" width="40px" alt="" id="toggle-icon">
                        <!-- <button id="toggle-icon" class="nav-item__bt fa-solid fa-volume-high"></button> -->
                        </a>
                      <!-- </li> -->
                    </ul>
                  </div>
                </li>
                <li class="nav-item">
                  <div class="user-items pl-8">
                    <ul class="d-flex justify-content-end list-unstyled">
                        <img src="./images/27.png" alt="" width="42px" >
                      <!-- </li> -->
                    </ul>
                  </div>
                </li>
                <li class="nav-item">
                  <div class="user-items pl-8">
                    <ul class="d-flex justify-content-end list-unstyled">
                        <img src="./images/28.png" width="40px" alt="" class="nav__item-btn--play "  onclick="enableAutoplayvideo360()">
                        <!-- </li> -->
                    </ul>
                  </div>
                </li>
                <li class="nav-item">
                  <div class="user-items pl-8">
                    <ul class="d-flex justify-content-end list-unstyled">
                        <img src="./images/29.png" width="40px" alt="" class="nav__item-btn--play " onclick="enableAutoplay()">
                        <!-- </li> -->
                    </ul>
                  </div>
                </li>
              </ul>
              
            </div>
            <div class="col-xl-6 dn">
              <img src="./images/the-road.png" alt="" style="height: 178px;">
              <img id="imagescrollid" src="./images/30.png" alt="" class="btn_road">
            </div>
            <div class="col-xl-3">
              <ul class="nav pd" style="position: absolute; padding: 20px 5px; right: 1%;">
                <li class="nav-item">
                  <div class="user-items pl-8">
                    <ul class="d-flex justify-content-end list-unstyled">
                      <!-- <li class="nav-item__bt fa-solid fa-volume-high"> -->
                        <img onclick="zoomInNew(5)" id="zoom-in2"  src="./images/31.png" width="40px" alt="">
                        <!-- <button id="toggle-icon" class="nav-item__bt fa-solid fas fa-plus" style="padding: 8px 10px;"></button> -->
                      <!-- </li> -->
                    </ul>
                  </div>
                </li>
                
                
                <li class="nav-item">
                  <div class="user-items pl-8">
                    <ul class="d-flex justify-content-end list-unstyled">
                      <!-- <li class="nav-item__bt fa-solid fa-volume-high"> -->
                        <img onclick="zoomOutNew(5)" id="zoom-out2"  src="./images/32.png" width="40px" alt="">
                        <!-- <button id="toggle-icon" class="nav-item__bt fas fa-window-minimize" style="background-color: #e2c693; box-shadow: 0px 2px #e2c693; padding: 8px 8px;"></button> -->
                      <!-- </li> -->
                    </ul>
                  </div>
                </li>
              </ul>
            </div>
          </div>
    
    <!-- list thumnail -->
    <div class="carousel" style="height: 40vh;  margin-top: 0; background-image: url(./images/33.png);  ">
        <div class="row">
            <div class="col-xl-3 col-lg-4 col-md-12">
                <div class="content ">
                    <div class="topic " style="font-size: 1.4rem; color: #58574b; font-family: bahnschrift;">PHỐ MÃ MÂY</div>
                    <div class="des" style="font-family: cambria;">
                        <!-- lorem 50 -->
                        Phố Hàng Bạc, xưa là phường nghề đúc bạc, được coi là giàu có bậc nhất ở Kinh thành Thăng Long. Trải qua nhiều thế kỷ với những biến động thời gian, nhưng phố Hàng Bạc vẫn giữ được nhiều nét kiến trúc, nếp sống làng nghề xưa. Nhìn từ góc
        
                    </div>
                    
                </div>
            </div>
            <div class="col-xl-9 col-lg-8 col-md-0">
                <div class="thumbnail" style="display: flex;">
                    <div class="item ">
                        <a href="./infor-place.html"><img src="./images/banner-map-1.webp"></a>
                        <div class="content">
                            <div class="title cambria" >
                                Số 10
                            </div>
                            <div class="description cambria">
                                Nhà cổ
                            </div>
                        </div>
                    </div>
                    <div class="item ">
                        <a href="./infor-place.html"><img src="./images/banner-map-2.jpg"></a>
                        <div class="content">
                            <div class="title cambria">
                                Số 10
                            </div>
                            <div class="description cambria">
                                Nhà cổ
                            </div>
                        </div>
                    </div>
                    <div class="item ">
                        <a href="./infor-place.html"><img src="./images/banner-map-3.jpg"></a>
                        <div class="content">
                            <div class="title">
                                Số 10
                            </div>
                            <div class="description">
                                Nhà cổ
                            </div>
                        </div>
                    </div>
                    <div class="item ">
                        <a href="./infor-place.html"><img src="./images/banner-map-4.jpg"></a>
                        <div class="content">
                            <div class="title">
                                Số 10
                            </div>
                            <div class="description">
                                Nhà cổ
                            </div>
                        </div>
                    </div>
                    <div class="item ">
                        <a href="./infor-place.html"><img src="./images/banner-map-5.jpg"></a>
                        <div class="content">
                            <div class="title">
                                Số 10
                            </div>
                            <div class="description">
                                Nhà cổ
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        
        
    </div>
    

    <!-- Modal -->
    <div  style="z-index: 99999999;position: fixed;top: 0;display: none;width: 1920px;height: 100%;" id="videothuong">
            <video id="myVideo"   controls="controls" style="width: 100%;height: 100%;object-fit: cover;" >
              <source src="./video/video_test.mp4" type="video/mp4" style="width: 100%;height: 100%">
            </video>
            <!-- <iframe width="100%" height="100%" style="position: absolute;" src="./video/video_test.mp4" title="YouTube video player" frameborder="0"  allowfullscreen></iframe> -->
            <div class="popupvideo__inner-close" onclick="disableAutoplay()" style="position: absolute; right: 0;top:0; margin: 20px;">
              <img src="./images/53.png" width="40px">
            </div>
      </div>    

      <div class="player-wrapper" style="z-index: 999999;position: fixed;top: 0;display: none;"id="video360_show">
        <video id="player" class="player video-js vjs-default-skin vjs-big-play-centered" crossorigin="anonymous" preload="metadata" autoplay controls name="video-js" >
          <!-- <source   src="./video/video_test.mp4" type="video/mp4"> -->
          <source  src="https://yanwsh.github.io/videojs-panorama/assets/shark.mp4" class="player_html5_api2">
        </video>
        <div class="icon_video2" onclick="anvideo360()" style="z-index: 99999999;display: none;position: absolute;right: 0;margin: 20px;" id="phongtovideo360">
          <img src="./images/53.png" width="40px">
        </div>
      </div>


  <!-- popupvideo -->
  <script>
// panama vdieo
 
    function enableAutoplayvideo360(){
      document.getElementById('video360_show').style.display='';
      document.getElementById('phongtovideo360').style.display='';
   
      var options = {
  plugins: {
    panorama: {
      clickAndDrag: true,
      clickToToggle: true,
      autoMobileOrientation: true,
      backToVerticalCenter: false,
      backToHorizonCenter: false
    }
  }
};
var video = document.getElementById('player');
var player = videojs('player', options, function() {
  video.autoplay = true;
  video.load();
});
document.getElementById('player_html5_api').classList.remove('video-js');
      document.getElementsByName('video-js').style.visible='visible';
    }
    function anvideo360(){
      document.getElementById('video360_show').style.display='none';
      document.getElementById('phongtovideo360').style.display='none';
      var options = {
  plugins: {
    panorama: {
      clickAndDrag: false,
      clickToToggle: false,
      autoMobileOrientation: true,
      backToVerticalCenter: false,
      backToHorizonCenter: false
    }
  }
};
var video = document.getElementById('player');
var player = videojs('player', options, function() {
  video.autoplay = false;
  video.load();
});

    }
// panama vdieo


//    vid.autoplay = true;
  function enableAutoplay() { 
    document.getElementById('videothuong').style.display='block';
    let vid = document.getElementById("myVideo");
    vid.autoplay = true;
    vid.load();
  }
  
  function disableAutoplay() { 
    document.getElementById('videothuong').style.display='none';
    let vid = document.getElementById("myVideo");
    vid.autoplay = false;
    vid.load();
  } 
  
  
  
      
  //handleModalVideo();
  </script>
  

<!-- zoom in zoom out -->
<script>
  function ZoomIn() {
  var myImg = document.getElementById("content-map");
  var currWidth = myImg.clientWidth;
  if (currWidth == 2500) return false;
  else {
    myImg.style.width = (currWidth + 100) + "px";
  }
}

function ZoomOut() {
  var myImg = document.getElementById("content-map");
  var currWidth = myImg.clientWidth;
  if (currWidth == 100) return false;
  else {
    myImg.style.width = (currWidth - 100) + "px";
  }
}



</script>


    <!-- // script music -->
<script>
  document.addEventListener("DOMContentLoaded", function() {
      var music = document.getElementById("background-music");
      var iconButton = document.getElementById("toggle-icon");
  
      iconButton.addEventListener("click", function() {
          if (music.paused) {
              music.play();
              icon.classList.toggle("fa-volume-mute");
          } else {
              music.pause();
              icon.classList.toggle("fa-volume-up");     
          }
          var icon = iconButton.querySelector("i");
      });
  });
  
    </script>

    <script src="./js/main.js"></script>
<script>	
// This function checks if the specified event is supported by the browser.
// Source: http://perfectionkills.com/detecting-event-support-without-browser-sniffing/
function isEventSupported(eventName) {
    var el = document.createElement('div');
    eventName = 'on' + eventName;
    var isSupported = (eventName in el);
    if (!isSupported) {
        el.setAttribute(eventName, 'return;');
        isSupported = typeof el[eventName] == 'function';
    }
    el = null;
    return isSupported;
}

$(document).ready(function() {
    // Check which wheel event is supported. Don't use both as it would fire each event 
    // in browsers where both events are supported.
    var wheelEvent = isEventSupported('mousewheel') ? 'mousewheel' : 'wheel';

    // Now bind the event to the desired element
    $('#draggable').on(wheelEvent, function(e) {
        var oEvent = e.originalEvent,
            delta  = oEvent.deltaY || oEvent.wheelDelta;

        // deltaY for wheel event
        // wheelData for mousewheel event

        if (delta > 0) {
            // Scrolled up
			console.log('Scrolled up');
			zoomInNew(1);
        } else {
            // Scrolled down
			console.log('Scrolled down');
			zoomOutNew(1);
        }
    });
});
    </script>
</body>
</html>